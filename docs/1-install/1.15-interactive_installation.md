# Installazione Interattiva con install.sh

**ThothAI** fornisce uno script di installazione unificato `install.sh` che semplifica notevolmente il processo di installazione sia del backend (Thoth) che del frontend (ThothSL). Questo strumento intelligente automatizza il setup dell'ambiente, la gestione delle dipendenze e la configurazione dei container Docker.

!!! success "Installazione Automatizzata"
    
    Lo script `install.sh` rappresenta il metodo più semplice e veloce per installare ThothAI, gestendo automaticamente la creazione degli ambienti virtuali, l'installazione delle dipendenze e l'avvio dei servizi Docker.

## Prerequisiti

Prima di utilizzare lo script di installazione, assicurarsi di avere:

- **Python 3.8+** installato nel sistema
- **Docker** e **Docker Compose** (raccomandato per il deployment)
- **Git** per la clonazione dei repository
- Le **API Keys** necessarie (vedi [Acquisizione Sorgenti](1.1-sources_cloning.md#2---le-api-keys))

## 1. Preparazione dell'Ambiente

### 1.1 - Clonazione del Repository Unificato

Se non è già stato fatto, clonare il repository principale:

```bash
git clone https://github.com/mptyl/Thoth.git
cd Thoth
```

**Effetto**: Scarica tutti i componenti di ThothAI (backend, frontend, librerie e documentazione) in un'unica directory strutturata.

![Placeholder: Screenshot del comando git clone che mostra il download in corso](../assets/screenshots/git-clone-thoth.png)

### 1.2 - Verifica della Struttura del Progetto

Lo script `install.sh` si trova nella directory principale e gestisce l'installazione unificata:

```bash
ls -la install.sh
```

**Effetto**: Verifica la presenza dello script principale e i suoi permessi di esecuzione.

![Placeholder: Screenshot della struttura directory principale con install.sh evidenziato](../assets/screenshots/project-structure-install.png)

## 2. Utilizzo dello Script di Installazione

### 2.1 - Verifica delle Dipendenze del Sistema

Prima di procedere con l'installazione, verificare che tutti i prerequisiti siano soddisfatti:

```bash
./install.sh --check-deps
```

**Effetto**: 
- Controlla la presenza di Python 3.8+
- Verifica pip e la sua versione
- Controlla Docker e Docker Compose
- Identifica eventuali librerie di sistema mancanti
- Fornisce istruzioni specifiche per il sistema operativo in uso

![Placeholder: Screenshot del controllo dipendenze che mostra tutti i controlli passati con successo](../assets/screenshots/dependency-check-success.png)

### 2.2 - Visualizzazione dell'Aiuto

Per comprendere tutte le opzioni disponibili:

```bash
./install.sh --help
```

**Effetto**: Mostra l'interfaccia completa dello script con:
- Tutte le opzioni disponibili
- Esempi di utilizzo
- Database e vector database supportati
- URL di accesso post-installazione

![Placeholder: Screenshot dell'help completo dello script install.sh](../assets/screenshots/install-help-screen.png)

## 3. Modalità di Installazione

### 3.1 - Installazione Interattiva (Raccomandata)

La modalità più semplice per iniziare:

```bash
./install.sh
```

**Effetto Step-by-Step**:

1. **Controllo Sistema**: Verifica automaticamente Python, pip e Docker
2. **Gestione Virtual Environment**: Crea automaticamente `.venv` se non esiste
3. **Attivazione Ambiente**: Attiva l'ambiente virtuale del progetto
4. **Menu Interattivo**: Presenta opzioni per selezionare:
   - Database da supportare (PostgreSQL, MySQL, SQLite, etc.)
   - Vector database (Qdrant, Weaviate, Chroma, etc.)
   - Modalità di deployment (Auto/Manuale)

![Placeholder: Screenshot del menu interattivo di selezione database](../assets/screenshots/interactive-database-selection.png)

5. **Generazione Dipendenze**: Crea automaticamente i file `requirements.txt` ottimizzati
6. **Build Docker**: Costruisce le immagini Docker per backend e frontend
7. **Avvio Servizi**: Lancia tutti i container necessari

![Placeholder: Screenshot del processo di build Docker in corso](../assets/screenshots/docker-build-progress.png)

### 3.2 - Installazione con Parametri Specifici

Per installazioni non interattive con configurazioni predefinite:

```bash
./install.sh --db postgresql,sqlite --vdb qdrant --auto
```

**Effetto**: 
- Installa supporto per PostgreSQL e SQLite
- Configura Qdrant come vector database
- Avvia automaticamente tutti i servizi Docker

![Placeholder: Screenshot dell'installazione automatica con parametri specificati](../assets/screenshots/auto-install-with-params.png)

### 3.3 - Installazione Solo Backend

Per installare solamente i componenti backend:

```bash
./install.sh --backend-only --auto
```

**Effetto**:
- Installa e configura solo Thoth (Django backend)
- Avvia PostgreSQL, Qdrant e i servizi correlati
- Non installa ThothSL (frontend Streamlit)

### 3.4 - Installazione Solo Frontend

Per installare solamente il frontend:

```bash
./install.sh --frontend-only --auto
```

**Effetto**:
- Installa e configura solo ThothSL (Streamlit frontend)
- Presuppone che il backend sia già disponibile
- Configura la connessione verso il backend esistente

## 4. Gestione dell'Ambiente Virtuale

### 4.1 - Creazione Automatica del Virtual Environment

Lo script gestisce automaticamente l'ambiente virtuale:

```bash
# L'ambiente viene creato automaticamente durante l'installazione
# Se necessario, lo si può creare manualmente con:
./install.sh --create-venv
```

**Effetto**:
- Crea `.venv` nella directory principale del progetto
- Attiva automaticamente l'ambiente
- Aggiorna pip alla versione più recente
- Installa tutte le dipendenze necessarie

![Placeholder: Screenshot della creazione del virtual environment](../assets/screenshots/venv-creation.png)

### 4.2 - Attivazione Manuale dell'Ambiente

Se necessario attivare manualmente l'ambiente in sessioni future:

```bash
source .venv/bin/activate
```

**Effetto**: Attiva l'ambiente virtuale del progetto, rendendo disponibili tutti i package Python installati.

## 5. Modalità di Deployment

### 5.1 - Modalità Automatica (Default)

```bash
./install.sh --auto
```

**Effetto**:
- Genera i file di configurazione necessari
- Costruisce automaticamente le immagini Docker
- Avvia tutti i servizi in background
- Configura la rete Docker condivisa
- Rende immediatamente disponibili le applicazioni

![Placeholder: Screenshot dei servizi Docker in esecuzione](../assets/screenshots/docker-services-running.png)

### 5.2 - Modalità Manuale

```bash
./install.sh --manual
```

**Effetto**:
- Genera solo i file di configurazione e dipendenze
- Non avvia automaticamente Docker
- Permette controllo granulare del processo di avvio
- Utile per debugging o configurazioni personalizzate

## 6. Verifica dell'Installazione

### 6.1 - Controllo dei Servizi

Dopo l'installazione automatica, verificare che tutti i servizi siano attivi:

```bash
docker compose ps
```

**Effetto**: Mostra lo stato di tutti i container ThothAI (backend, frontend, PostgreSQL, Qdrant).

![Placeholder: Screenshot del comando docker compose ps che mostra tutti i servizi attivi](../assets/screenshots/docker-compose-status.png)

### 6.2 - Test di Connettività

Verificare l'accesso ai servizi web:

- **Backend Django**: [http://localhost:8040](http://localhost:8040)
- **Frontend Streamlit**: [http://localhost:8501](http://localhost:8501)
- **Admin Panel**: [http://localhost:8040/admin](http://localhost:8040/admin)
- **Qdrant Dashboard**: [http://localhost:6333/dashboard](http://localhost:6333/dashboard)

![Placeholder: Screenshot della homepage del frontend ThothSL](../assets/screenshots/thothsl-homepage.png)

### 6.3 - Verifica Backend

Testare l'installazione del backend:

```bash
python -c "import thoth_core; print('Backend OK!')"
```

**Effetto**: Conferma che tutti i moduli Django del backend sono correttamente installati e importabili.

### 6.4 - Verifica Frontend

Testare l'installazione del frontend:

```bash
python -c "import streamlit; print('Frontend OK!')"
```

**Effetto**: Conferma che Streamlit e tutte le dipendenze del frontend sono correttamente installate.

## 7. Configurazioni Avanzate

### 7.1 - Visualizzazione della Configurazione Corrente

```bash
./install.sh --show-config
```

**Effetto**: Mostra la configurazione attuale di database e vector database selezionati, permettendo di verificare le scelte effettuate.

![Placeholder: Screenshot della configurazione corrente visualizzata](../assets/screenshots/current-configuration.png)

### 7.2 - Reset della Configurazione

```bash
./install.sh --reset
```

**Effetto**: 
- Reimposta la configurazione ai valori di default
- Cancella le preferenze utente salvate
- Utile per ricominciare da zero con impostazioni pulite

### 7.3 - Installazione con Output Dettagliato

```bash
./install.sh --verbose
```

**Effetto**: Mostra output dettagliato del processo di build Docker, utile per debugging in caso di problemi.

![Placeholder: Screenshot dell'output verboso durante il build Docker](../assets/screenshots/verbose-docker-build.png)

## 8. Risoluzione dei Problemi Comuni

### 8.1 - Errori di Permessi

Se lo script non può essere eseguito:

```bash
chmod +x install.sh
./install.sh
```

**Effetto**: Rende lo script eseguibile e lo avvia.

### 8.2 - Problemi con l'Ambiente Virtuale

Se ci sono conflitti con virtual environment esistenti:

```bash
rm -rf .venv
./install.sh --create-venv
```

**Effetto**: Rimuove l'ambiente virtuale esistente e ne crea uno nuovo pulito.

### 8.3 - Problemi con Docker

Se Docker non risponde correttamente:

```bash
docker system prune -f
./install.sh --auto
```

**Effetto**: Ripulisce il sistema Docker e riavvia l'installazione.

### 8.4 - Controllo dei Log

Per diagnosticare problemi:

```bash
docker compose logs thoth-be
docker compose logs thoth-sl
```

**Effetto**: Mostra i log dettagliati dei servizi per identificare eventuali errori.

![Placeholder: Screenshot dei log Docker che mostrano l'avvio corretto dei servizi](../assets/screenshots/docker-logs-success.png)

## 9. Passi Successivi

Dopo una installazione riuscita:

1. **Configurazione delle API Keys**: Seguire la [guida di configurazione](1.4-quick_setup.md) per impostare le chiavi API
2. **Setup Workspaces**: Creare e configurare i workspace tramite l'admin panel
3. **Test delle Funzionalità**: Eseguire query di test tramite l'interfaccia Streamlit
4. **Personalizzazione**: Modificare le configurazioni secondo le necessità specifiche

!!! tip "Suggerimento"
    
    Lo script `install.sh` può essere eseguito più volte senza problemi. Se si cambiano le configurazioni di database o si aggiungono nuove dipendenze, semplicemente rieseguire lo script per aggiornare l'installazione.

!!! warning "Attenzione"
    
    L'installazione modifica i file di configurazione esistenti. Se si hanno personalizzazioni importanti, effettuare un backup prima di procedere.