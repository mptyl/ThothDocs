# Installazione di Thoth in locale
L'installazione in locale è predisposta per essere in modalità Development.
Ciò è impostato nei parametri DEBUG=True e PROFILE='Dev' presenti nel file .env.template che deve essere copiato in .env e compilato in modo equivalente a quanto previsto al punto 2.4.


!!! note "Il setup Django"

    Come si imposta un'applicazione Django è al di fuori dello scope di questa documentazione
    Andare alla [pagina ufficiale di Django](https://docs.djangoproject.com/en/5.2/howto/deployment/) su questo argomento per ulteriori dettagli

## 1 - Procedura di Setup di Thoth (locale)
Il setup di Thoth in locale prevede le seguenti azioni:

## 1.1 - Impostazione del file .env
Copiare .env.template in .env e compilare i placeholder necessari. 
Devono essere necessariamente inserite le key di Django (SECRET_KEY e DJANGO_API_KEY), la key di Logfire ed almeno un provider LLM

## 1.2 - Creazione ambiente virtuale
a questo punto si deve impostare un ambiente python con 
``` bash
python3 -m venv .venv
source .venv/bin/activate
```

## 1.3 - Installazione package necessari
e installare tutti i package necessari
```bash
pip install -r requirements.txt
```

## 1.4 - Migrazione database
Infine vanno fatte le migrazioni necessarie per aggiornare il database di Django
```bash
python manage.py migrate
```

## 1.5 - Creazione di un superuser
Prima di poter fare la run del server è necessario creare un utente superuser da utilizzare per accedere al backend.
```bash
python manage.py createsuperuser
```

##  1.6 - Setup iniziale
Procedere quindi a caricare un setup base completo e consistente da usare come setup minimo iniziale .
```bash
python manage.py import_groups
python manage.py import_users
python manage.py import_all_csv --docker
```

## 1.7 - Run del server
Una volta completato il setup base si può lanciare il server Django digitando
```bash
python manage.py runserver
```

## 1.8 Verifica del funzionamento dell'applicazione di backend in locale
A questo punto è possibilile aprire **http://localhost:8000**, fare login con l'utente definito come superuser e ritrovarsi di fronte a questa form:
![screenshot-01](../assets/screenshot-01.png)

La componente di backend di Thoth è "up and running" in locale e si può passare al completamento del suo setup, che viene documentato nell'apposita pagina.

# 2 - Installazione dell'applicazione di frontend, ThothSL
Una installato il backend, si può installare il frontend, dal nome ThothSL (SL sta per Streamlit che è il tool usato per gestire la user interface). Entrare quindi nel progetto ThothSL e procedere come segue

## 2.1 - Impostazione del file .env
Copiare .env.template in .env e compilare i placeholder necessari. 
Devono essere necessariamente inserite le key di Django DJANGO_API_KEY, di Logfire e di almeno un provider LLM

## 2.2 - Creazione ambiente virtuale
a questo punto si deve impostare un ambiente python con 
``` bash
python3 -m venv .venv
source .venv/bin/activate
```

## 2.3 - Installazione package necessari
e installare tutti i package necessari
```bash
pip install -r requirements.txt
```

## 2.4 - Creazione di un link simbolico con la directory 'data' di Thoth
Collegare la directory 'data' del backend tramite un link simbolico. 
 Sotto windows:
```bash
mklink ../Thoth/data data
```

Sotto Linux o MacOs:
```bash
ln -s ../Thoth/data data
```

## 2.5 - Eseguire l'applicazione
Eseguire il comando
```bash
streamlit run ThothAI.py
```
Compare una form di login. 
