# Gestione dei Gruppi
Il backend di Thoth si basa su `Django`, un framework molto noto in ambito Python, che include un proprio sistema di autenticazione.

Nell'autenticazione di Django` un **gruppo** è un modo 
per categorizzare gli utenti e assegnare loro permessi e attributi in modo collettivo. 

In Thoth, il concetto di **gruppo** è stato esteso per offrire un controllo più granulare sull'esperienza utente nell'esecuzione delle interrogazioni, attraverso un [Profilo di Gruppo](3.1.1.3-group_profiles.md) che è associato a ogni gruppo standard di Django.

## 1 - Accesso ai gruppi

Alla gestione dei gruppi si accede tramite il menu presente nella sidebar delle pagine di amministrazione del backend.

![groups_list](../../../assets/authentication/users-main-menu.png)

Cliccando su Groups appare la lista dei gruppi disponibili.

![lista dei gruppi](../../../assets/authentication/list_of_groups.png)

Selezionando un gruppo, ad esempio il gruppo User, appare la seguente form:

![groups](../../../assets/authentication/group_user.png)

Il setup di un gruppo prevede che, oltre al nome, vengano definiti
- i permessi attribuiti ai membri del gruppo
- il profilo del gruppo

## 2 - I permessi attribuiti ai membri del gruppo 

I permessi attribuibili a un gruppo possono essere di due tipi:

1. permessi standard di Django, che sono [descritti qui](https://docs.djangoproject.com/en/5.2/topics/auth/default/#groups)
2. permessi specifici di Thoth, che sono quelli il cui nome inizia con `Thoth_Core`.

La soluzione più rapida è quella di attribuire al gruppo Admin tutti i permessi previsti nella form di gestione, e lasciare senza alcun permesso tutti gli altri gruppi.

### 2.1 - A cosa servono i Gruppi in Thoth

   1. gli **Admin**, che possono gestire il setup del backend in termini di database, modelli, agenti e workspaces
   2. gli **Editor**, che non possono agire sul backend, ma possono gestire il contenuto del database vettoriale per operare su Hints, Column Descriptions e Questions e per eseguire il preprocessing 
   3. Gli **User** (possono esserci tanti gruppi di tipo User) che possono solo agire sul frontend senza poter contribuire al database vettoriale e tanto meno alla configurazione generale. Si tratta quindi di utilizzatori finali

Un utente quindi può essere, ad esempio:

- un semplice **User**, con un profilo che, durante la gestione del [workflow](../../../5-reference_manual/5.3-workflow/5.3.1-preliminary_steps.md), gli permette di vedere alcuni dei i messaggi che informano sull'avanzamento del processo
- uno **User_Basic**, che può vedere solo la tabella risultante dalla query e la spiegazione di come ci si è arrivati, 
- uno **User_Tech** , normalmente un utente con conoscenze di database, che vede tutti i dettagli del [workflow](../../../5-reference_manual/5.3-workflow/5.3.1-preliminary_steps.md) e l'istruzione SQL generata

Oltre che appartenere a un gruppo User, un utente può appartenere anche a:

- un gruppo **Editor**, acquisendo così l'autorizzazione ad aggiungere informazioni sul database vettoriale
- un gruppo **Admin**, acquisendo così l'autorizzazione ad amministrare i parametri generali dell'applicazione.
{{ ... }}
- **Show SQL generation**: Se attivato, l'utente potrà vedere quale Agente viene usato per la  generazione della query SQL, inclusi i passaggi intermedi e le decisioni prese dall'AI.
- **Explain generated query**: Se attivato, l'AI fornirà una spiegazione, in linguaggio naturale, della query SQL generata. Questo è particolarmente utile a utenti non tecnici per comprendere come l'interrogazione è stata gestita senza bisogno di conoscere l'SQL.

Ulteriori dettagli possono essere 

Le opzioni gestite dal Profilo di Gruppo controllano quali informazioni vengono mostrate agli utenti appartenenti al gruppo durante l'esecuzione del [workflow](../../../5-reference_manual/5.3-workflow/5.3.1-preliminary_steps.md) di generazione del SQL.