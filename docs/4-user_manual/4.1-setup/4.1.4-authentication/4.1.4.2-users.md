# Gestione Utenti

La gestione degli utenti in Thoth si basa sul sistema di autenticazione standard di Django, che fornisce un framework solido per la gestione di utenti, gruppi e permessi. Questa sezione descrive come vengono gestiti gli utenti all'interno di Thoth e quali informazioni sono associate a ciascun utente.

## 1 - Il Concetto di Utente

Nel sistema di autenticazione di Django, un "Utente" rappresenta un individuo che pu&#xF2; accedere e interagire con l'applicazione. Ogni utente ha le proprie credenziali (nome utente e password) e un insieme di permessi che definiscono quali azioni pu&#xF2; eseguire all'interno del sistema.

Thoth utilizza il modello `User` standard di Django senza estensioni dirette. Questo significa che le informazioni di base gestite per ogni utente sono l'insieme predefinito da Django.

## 2 - Informazioni Gestite nel Form Utente

Quando si crea o si modifica un utente dall'interfaccia di amministrazione di Thoth, vengono gestite le seguenti sezioni di informazioni:

### 2.1 - Dati Personali
- **Nome utente**: Il nome univoco utilizzato per il login.
- **Password**: La password di autenticazione. Per motivi di sicurezza, la password non viene mai mostrata in chiaro.
- **Nome**: Il nome dell'utente.
- **Cognome**: Il cognome dell'utente.
- **Indirizzo email**: L'indirizzo email dell'utente.

### 2.2 - Stato e Permessi
- **Attivo**: Un flag che indica se l'utente &#xE8; attivo. Se disattivato, l'utente non pu&#xF2; effettuare il login.
- **Stato staff**: Un flag che indica se l'utente pu&#xF2; accedere all'interfaccia di amministrazione.
- **Stato superuser**: Un flag che, quando attivo, concede all'utente tutti i permessi del sistema, bypassando qualsiasi controllo specifico.

### 2.3 - Gruppi e Permessi Individuali
- **Gruppi**: In questa sezione, &#xE8; possibile assegnare l'utente a uno o pi&#xF9; gruppi. I permessi in Thoth sono gestiti principalmente a livello di gruppo.
- **Permessi utente**: Permessi specifici possono essere assegnati direttamente a un utente, anche se la pratica raccomandata &#xE8; gestire i permessi attraverso i gruppi.

## 3 - Il Ruolo dei Gruppi e dei Profili Gruppo

La vera personalizzazione della gestione utenti in Thoth avviene a livello di **Gruppo**. Mentre il modello `User` &#xE8; standard, ogni `Group` in Thoth &#xE8; associato a un **Profilo Gruppo** (`GroupProfile`) che definisce in dettaglio le funzionalit&#xE0; e le viste a cui gli utenti di quel gruppo avranno accesso.

Quando un utente viene assegnato a un gruppo, eredita tutte le impostazioni definite nel profilo di quel gruppo. Questo consente una configurazione centralizzata e coerente dell'esperienza utente per intere categorie di utenti.

Per dettagli su come configurare i gruppi e i loro profili, fare riferimento alla documentazione specifica:
- [Gestione Gruppi](3.1.1.1-groups.md)
- [Profili Gruppo](3.1.1.3-group_profiles.md)

## 4 - Ruoli e Tipologie di Utente

Thoth implementa un sistema di ruoli flessibile che permette di definire con precisione le capacità e i permessi di ogni utente all'interno del sistema. Il sistema prevede tre ruoli principali che possono essere assegnati agli utenti in base alle loro responsabilità.

### 4.1 - Struttura dei Ruoli

Ogni utente in Thoth deve avere almeno il ruolo base **USER**, che rappresenta il profilo minimo per accedere al sistema. A questo ruolo base possono essere aggiunti ruoli aggiuntivi per estendere le capacità dell'utente.

### 4.2 - Descrizione dei Ruoli

#### Ruolo USER (Obbligatorio)
- **Descrizione**: Ruolo base assegnato a tutti gli utenti del sistema
- **Permessi**: 
  - Accesso all'interfaccia utente principale
  - Esecuzione di query sul database
  - Visualizzazione dei risultati
  - Accesso alle funzionalità base di Thoth
- **Note**: Questo ruolo è obbligatorio e viene assegnato automaticamente a ogni nuovo utente

#### Ruolo EDITOR (Opzionale)
- **Descrizione**: Ruolo per la gestione dei contenuti del database vettoriale
- **Permessi**:
  - Tutti i permessi del ruolo USER
  - Gestione dei contenuti nel database vettoriale
  - Creazione e modifica di hints (suggerimenti)
  - Gestione delle domande di esempio
  - Aggiornamento delle descrizioni delle colonne
  - Gestione dei metadati semantici
- **Utilizzo tipico**: Assegnato a utenti responsabili del miglioramento continuo delle capacità di comprensione del sistema

#### Ruolo ADMIN (Opzionale)
- **Descrizione**: Ruolo amministrativo con accesso completo al sistema
- **Permessi**:
  - Tutti i permessi del ruolo USER
  - Accesso completo all'area di amministrazione Django
  - Gestione completa degli utenti e dei gruppi
  - Configurazione dei modelli AI e degli agenti
  - Gestione delle connessioni ai database SQL
  - Configurazione dei workspace
  - Accesso ai log di sistema e al monitoraggio
- **Utilizzo tipico**: Assegnato agli amministratori di sistema e ai responsabili tecnici

### 4.3 - Combinazioni di Ruoli

Gli utenti possono avere combinazioni multiple di ruoli per adattarsi alle diverse esigenze organizzative:

- **USER**: Utente base con accesso alle funzionalità standard
- **USER + EDITOR**: Utente che può anche gestire e migliorare i contenuti del database vettoriale
- **USER + ADMIN**: Amministratore di sistema con accesso completo
- **USER + EDITOR + ADMIN**: Amministratore completo che gestisce sia il sistema che i contenuti

### 4.4 - Assegnazione dei Ruoli

I ruoli vengono assegnati attraverso il sistema di gruppi di Django:

1. **Dalla sezione Utenti**: Modificando un utente e assegnandolo ai gruppi corrispondenti
2. **Dalla sezione Gruppi**: Aggiungendo utenti direttamente ai gruppi desiderati
3. **Programmaticamente**: Utilizzando l'API di Django per assegnazioni automatiche

### 4.5 - Best Practices

- Assegnare sempre il minimo set di permessi necessari per svolgere le attività richieste
- Utilizzare il ruolo EDITOR per delegare la gestione dei contenuti senza dare accesso amministrativo completo
- Riservare il ruolo ADMIN solo al personale tecnico autorizzato
- Documentare le assegnazioni dei ruoli e mantenerle aggiornate
- Rivedere periodicamente i ruoli assegnati per garantire che siano ancora appropriati